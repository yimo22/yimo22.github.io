---
aliases: 
tags:
---
# Volume
도커는 항상 컨테이너에 설정하는 모든 볼륨을 평가하여, 충돌이 있는 경우에는 더 긴 내부경로를 우선시 한다. 

`voluempath:volumepath:ro` 를 통해서 read-only로 설정할 수 있다.

## 공통점
- 도커가 시작시 호스트 머신에 있는 폴더를 가져와 사용한다.

## Anonymous Volumes

### 특징
- 호스트 머신에 폴더를 생성한다.
	- Docker에 의해 관리되기 때문에 그 위치를 특정할 수 없다.
- 종료될 때마다 Volume 은 삭제된다.
- 주로 하나의 컨테이너에 밀접하게 연결되어 있다.
	- 다른 컨테이너에서 Volume을 사용할 수 없다. (익명이기에 재사용될 수 없다.)
- **컨테이너에 이미 존재하는 특정 데이터를 잠그는데 유용하다.**
	- 다른 모듈에 의해 덮어쓰여지는 것을 방지

### 예시
``` dockerifle
...

VOLUME ["/app/test"]

# Tip. 익명함수의 Volume은 컨테이너를 실행하면서 만드는 경우가 있다. 
# 이럴 경우, 이미지를 재빌드 하지 않아도 된다는 장점이 있다.
... 
```
다음의 경우를 보면, `app/test` 의 volume을 사용하지만, local 호스트의 어떤 폴더와 맵핑되어 있는지는 알 수 없다.  -> 이는 Docker에서 관리하기 때문에 액세스 할 수 없다.
## Named Volumes
이는 Dockerfile 에서 명명할 수 없기 떄문에, 컨테이너를 실행하면서 `-v` 옵션을 통해서 명시해줘야 한다.
### 특징
- 종료가 되어도 Volume은 유지된다.
- Dockerfile 에서 명시할 수 없다. 
- 여러개의 컨테이너가 공유하여 사용할 수 있다.
	- 특정 컨테이너에 종속되지 않는다.
- 영구적인 데이터에 적합하지만, 편집은 불가하다. 
	- 호스트 머신의 어느곳에 저장될 지 모르기 때문이다.

### 예시
``` bash
docker run -v SomeVolumeName:/app ...
```

# Bind Mounts
도커에 의해 관리되는 위치를 알 수 있다. 
- 절대 경로로 이를 명시해야 한다.
- Docker가 Resources 관리 목록에 해당 폴더(or 상위폴더) 가 존재하는지 확인해야 한다.
- 이는 호스트의 디테럭터리와 동기화가 아닌, 완전히 같은 디렉터리로 사용한다.
## 장점
- 도커에 의해 관리되는 파일의 위치를 알 수 있다.
	- 소스코드를 이 폴더와 맵핑하여, 항상 최신의 코드를 유지할 수 있다.
- 영구적이고 편집 가능한 데이터에 적합하다.
	- 호스트 머신의 어느곳에 저장될 지 알 수 있다.
	- 이를 통해서 'Live Data' 를 제공할 수 있다.
### 예시
``` bash
docker run -v /root/user/tmp:/app:volumes
```





![[]]




